{"ast":null,"code":"import{SEARCH_BASE_URL,POPULAR_BASE_URL,API_URL,API_KEY,REQUEST_TOKEN_URL,LOGIN_URL,SESSION_ID_URL}from'./config';const defaultConfig={method:'POST',headers:{'Content-Type':'application/json'}};const apiSettings={fetchMovies:async(searchTerm,page)=>{const endpoint=searchTerm?\"\".concat(SEARCH_BASE_URL).concat(searchTerm,\"&page=\").concat(page):\"\".concat(POPULAR_BASE_URL,\"&page=\").concat(page);return await(await fetch(endpoint)).json();},fetchMovie:async movieId=>{const endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"?api_key=\").concat(API_KEY);return await(await fetch(endpoint)).json();},fetchCredits:async movieId=>{const creditsEndpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/credits?api_key=\").concat(API_KEY);return await(await fetch(creditsEndpoint)).json();},// Bonus material below for login\ngetRequestToken:async()=>{const reqToken=await(await fetch(REQUEST_TOKEN_URL)).json();return reqToken.request_token;},authenticate:async(requestToken,username,password)=>{const bodyData={username,password,request_token:requestToken};// First authenticate the requestToken\nconst data=await(await fetch(LOGIN_URL,{...defaultConfig,body:JSON.stringify(bodyData)})).json();// Then get the sessionId with the requestToken\nif(data.success){const sessionId=await(await fetch(SESSION_ID_URL,{...defaultConfig,body:JSON.stringify({request_token:requestToken})})).json();return sessionId;}},rateMovie:async(sessionId,movieId,value)=>{const endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/rating?api_key=\").concat(API_KEY,\"&session_id=\").concat(sessionId);const rating=await(await fetch(endpoint,{...defaultConfig,body:JSON.stringify({value})})).json();return rating;}};export default apiSettings;","map":{"version":3,"names":["SEARCH_BASE_URL","POPULAR_BASE_URL","API_URL","API_KEY","REQUEST_TOKEN_URL","LOGIN_URL","SESSION_ID_URL","defaultConfig","method","headers","apiSettings","fetchMovies","searchTerm","page","endpoint","concat","fetch","json","fetchMovie","movieId","fetchCredits","creditsEndpoint","getRequestToken","reqToken","request_token","authenticate","requestToken","username","password","bodyData","data","body","JSON","stringify","success","sessionId","rateMovie","value","rating"],"sources":["/Users/mohammadravoof/Documents/GitHub/react-rmdb-v3-starter-files/react-rmdb/src/API.js"],"sourcesContent":["import {\n  SEARCH_BASE_URL,\n  POPULAR_BASE_URL,\n  API_URL,\n  API_KEY,\n  REQUEST_TOKEN_URL,\n  LOGIN_URL,\n  SESSION_ID_URL\n} from './config';\n\nconst defaultConfig = {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n};\n\nconst apiSettings = {\n  fetchMovies: async (searchTerm, page) => {\n    const endpoint = searchTerm\n      ? `${SEARCH_BASE_URL}${searchTerm}&page=${page}`\n      : `${POPULAR_BASE_URL}&page=${page}`;\n    return await (await fetch(endpoint)).json();\n  },\n  fetchMovie: async movieId => {\n    const endpoint = `${API_URL}movie/${movieId}?api_key=${API_KEY}`;\n    return await (await fetch(endpoint)).json();\n  },\n  fetchCredits: async movieId => {\n    const creditsEndpoint = `${API_URL}movie/${movieId}/credits?api_key=${API_KEY}`;\n    return await (await fetch(creditsEndpoint)).json();\n  },\n  // Bonus material below for login\n  getRequestToken: async () => {\n    const reqToken = await (await fetch(REQUEST_TOKEN_URL)).json();\n    return reqToken.request_token;\n  },\n  authenticate: async (requestToken, username, password) => {\n    const bodyData = {\n      username,\n      password,\n      request_token: requestToken\n    };\n    // First authenticate the requestToken\n    const data = await (\n      await fetch(LOGIN_URL, {\n        ...defaultConfig,\n        body: JSON.stringify(bodyData)\n      })\n    ).json();\n    // Then get the sessionId with the requestToken\n    if (data.success) {\n      const sessionId = await (\n        await fetch(SESSION_ID_URL, {\n          ...defaultConfig,\n          body: JSON.stringify({ request_token: requestToken })\n        })\n      ).json();\n      return sessionId;\n    }\n  },\n  rateMovie: async (sessionId, movieId, value) => {\n    const endpoint = `${API_URL}movie/${movieId}/rating?api_key=${API_KEY}&session_id=${sessionId}`;\n\n    const rating = await (\n      await fetch(endpoint, {\n        ...defaultConfig,\n        body: JSON.stringify({ value })\n      })\n    ).json();\n\n    return rating;\n  }\n};\n\nexport default apiSettings;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}